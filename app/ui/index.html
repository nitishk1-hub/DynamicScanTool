<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrome Monitor - Dynamic Scan Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
                <span class="logo-icon">üîç</span>
                <span class="logo-text">Chrome Monitor</span>
            </div>
            <div class="nav-items">
                <button class="nav-item active" data-tab="scan">
                    <span class="nav-icon">üî¨</span>
                    <span>Scan</span>
                </button>
                <button class="nav-item" data-tab="scripts">
                    <span class="nav-icon">üìù</span>
                    <span>Scripts</span>
                </button>
                <button class="nav-item" data-tab="credentials">
                    <span class="nav-icon">üîê</span>
                    <span>Credentials</span>
                </button>
                <button class="nav-item" data-tab="reports">
                    <span class="nav-icon">üìã</span>
                    <span>Reports</span>
                </button>
            </div>
            <div class="nav-footer">
                <div class="version">v1.0.0</div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content">

            <!-- ============ SCAN TAB ============ -->
            <section class="tab-content active" id="scan-tab">
                <div class="page-header">
                    <h1>üî¨ Extension Security Scan</h1>
                    <p>Upload extension ‚Üí Static Analysis ‚Üí Dynamic Testing ‚Üí Real-time Monitoring</p>
                </div>

                <!-- Step 1: Upload Extension -->
                <div class="scan-section">
                    <h3>Step 1: Upload Extension</h3>
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">üì¶</div>
                        <p>Drop CRX/ZIP file here or click to browse</p>
                        <input type="file" id="file-input" accept=".crx,.zip" hidden>
                    </div>
                </div>

                <!-- Step 2: Static Analysis Result -->
                <div class="scan-section hidden" id="static-result-section">
                    <h3>Step 2: Static Analysis Result</h3>
                    <div class="static-result" id="static-result">
                        <!-- Populated dynamically -->
                    </div>
                </div>

                <!-- Step 3: Start Dynamic Testing -->
                <div class="scan-section hidden" id="dynamic-test-section">
                    <h3>Step 3: Dynamic Testing</h3>

                    <div class="test-options">
                        <div class="option-row">
                            <label>
                                <input type="checkbox" id="use-credentials"> Use Test Credentials
                            </label>
                        </div>
                        <div class="option-row">
                            <label>Run Automation Script:</label>
                            <select id="script-select">
                                <option value="">-- Manual Testing --</option>
                                <!-- Populated dynamically -->
                            </select>
                        </div>
                    </div>

                    <div class="test-controls">
                        <button class="btn btn-success btn-lg" id="start-test-btn">‚ñ∂ Start Browser Testing</button>
                        <button class="btn btn-danger btn-lg hidden" id="stop-test-btn">‚èπ Stop & Generate
                            Report</button>
                        <button class="btn btn-secondary hidden" id="export-har-btn">üì¶ Export HAR</button>
                    </div>
                </div>

                <!-- Step 4: Real-time Dynamic Data -->
                <div class="scan-section hidden" id="realtime-section">
                    <h3>Step 4: Real-time Monitoring</h3>

                    <!-- Status Bar -->
                    <div class="status-bar">
                        <div class="status-indicator active"></div>
                        <span id="status-text">Recording Activity...</span>
                        <span class="duration" id="stat-duration">0s</span>
                    </div>

                    <!-- Stats Grid -->
                    <div class="realtime-stats">
                        <div class="stat-box">
                            <span class="stat-value" id="stat-requests">0</span>
                            <span class="stat-label">Network Requests</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" id="stat-activities">0</span>
                            <span class="stat-label">Extension API Calls</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" id="stat-dom">0</span>
                            <span class="stat-label">DOM Events</span>
                        </div>
                        <div class="stat-box threat" id="threat-box">
                            <span class="stat-value" id="stat-threats">0</span>
                            <span class="stat-label">Threats Detected</span>
                        </div>
                    </div>

                    <!-- Threat Alerts -->
                    <div class="threat-alerts hidden" id="threat-alerts">
                        <h4>‚ö†Ô∏è Threat Alerts</h4>
                        <div id="threat-list"></div>
                    </div>

                    <!-- Live Data Tabs -->
                    <div class="live-data-tabs">
                        <button class="tab-btn active" data-live="network">Network</button>
                        <button class="tab-btn" data-live="dom">DOM Events</button>
                        <button class="tab-btn" data-live="api">API Calls</button>
                        <button class="tab-btn" data-live="automation">Automation</button>
                    </div>

                    <div class="live-data-panel" id="live-data-panel">
                        <div class="live-empty">Waiting for activity...</div>
                    </div>
                </div>
            </section>

            <!-- ============ SCRIPTS TAB ============ -->
            <section class="tab-content" id="scripts-tab">
                <div class="page-header">
                    <h1>üìù Automation Scripts</h1>
                    <p>Create, edit, and manage custom automation scripts</p>
                </div>

                <div class="scripts-layout">
                    <div class="scripts-sidebar">
                        <button class="btn btn-success" id="new-script-btn">‚ûï New Script</button>
                        <div class="scripts-list" id="scripts-list">
                            <!-- Populated dynamically -->
                        </div>
                    </div>

                    <div class="scripts-editor">
                        <div class="editor-toolbar">
                            <input type="text" id="script-name" placeholder="Script Name" class="input-lg">
                            <button class="btn btn-primary" id="save-script-btn">üíæ Save</button>
                            <button class="btn btn-danger" id="delete-script-btn">üóëÔ∏è Delete</button>
                        </div>
                        <textarea id="script-editor" class="code-editor"
                            placeholder='Enter script JSON here...'></textarea>
                        <div class="editor-help">
                            <strong>Actions:</strong> navigate, click, type, wait, scroll, hover, screenshot, newTab,
                            reload, press, login, fillCredentials
                            <br><br>
                            <strong>Example:</strong>
                            <pre>{
  "name": "My Login Test",
  "actions": [
    { "type": "navigate", "url": "https://example.com/login" },
    { "type": "wait", "duration": 2000 },
    { "type": "login" }
  ]
}</pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ============ CREDENTIALS TAB ============ -->
            <section class="tab-content" id="credentials-tab">
                <div class="page-header">
                    <h1>üîê Test Credentials</h1>
                    <p>Manage credentials for automated login testing</p>
                </div>

                <!-- Default Credentials -->
                <div class="cred-card">
                    <h3>Default Credentials</h3>
                    <p class="desc">Used when no site-specific credentials are found</p>
                    <div class="cred-form">
                        <input type="email" id="default-email" placeholder="Email" class="input-field">
                        <input type="text" id="default-username" placeholder="Username" class="input-field">
                        <input type="password" id="default-password" placeholder="Password" class="input-field">
                        <button class="btn btn-primary" id="save-default-btn">Save</button>
                    </div>
                </div>

                <!-- Site Credentials -->
                <div class="cred-card">
                    <h3>Site-Specific Credentials</h3>
                    <div class="site-list" id="site-list">
                        <!-- Populated dynamically -->
                    </div>

                    <div class="add-site-form">
                        <h4>Add New Site</h4>
                        <div class="cred-form">
                            <input type="text" id="site-name" placeholder="Site (e.g., facebook, google)"
                                class="input-field">
                            <input type="email" id="site-email" placeholder="Email" class="input-field">
                            <input type="password" id="site-password" placeholder="Password" class="input-field">
                            <button class="btn btn-success" id="add-site-btn">‚ûï Add</button>
                        </div>
                    </div>
                </div>

                <!-- Import/Export -->
                <div class="cred-card">
                    <h3>Import / Export</h3>
                    <div class="btn-group">
                        <button class="btn btn-secondary" id="import-creds-btn">üì• Import JSON</button>
                        <button class="btn btn-secondary" id="export-creds-btn">üì§ Export JSON</button>
                        <button class="btn btn-danger" id="clear-creds-btn">üóëÔ∏è Clear All</button>
                    </div>
                </div>
            </section>

            <!-- ============ REPORTS TAB ============ -->
            <section class="tab-content" id="reports-tab">
                <div class="page-header">
                    <h1>üìã Security Reports</h1>
                    <p>View and export scan results</p>
                </div>

                <div class="reports-list" id="reports-list">
                    <!-- Populated dynamically -->
                </div>

                <div class="report-detail hidden" id="report-detail">
                    <!-- Report details shown here -->
                </div>
            </section>

        </main>
    </div>

    <script src="renderer.js"></script>
</body>

</html>